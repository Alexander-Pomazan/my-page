{"version":3,"sources":["webpack:///./src/fireflies.js","webpack:///./src/components/background.js"],"names":["setupAnimation","canvasNode","canvas","context","getContext","requestAnimationFrame","window","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","resizeCanvasToWindow","parentElement","canvasParent","canvasWidth","offsetWidth","canvasHeight","offsetHeight","setAttribute","addEventListener","persons","numberOfFirefly","colors","colorTheme","getRandomInt","min","max","exept","i","Math","floor","random","degToRad","deg","PI","Firefly","id","this","width","height","x","y","speed","alpha","alphaReduction","color","length","direction","turner","turnerAmp","isHit","stepCounter","changeDirectionFrequency","shape","shadowBlur","animate","clearRect","beginPath","persons_order","slice","sort","a","b","u","walk","prototype","stop","update","next_x","cos","next_y","sin","takeOppositeDirection","fillStyle","arc","shadowColor","shadowOffsetX","shadowOffsetY","fill","die","onclick","e","giveBirth","layerX","layerY","instantiatePopulation","Canvas","Background","canvasRef","useRef","useEffect","ref"],"mappings":"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","file":"6-2f134de47f2ad036af93.js","sourcesContent":["/* eslint-disable */\nexport const setupAnimation = (canvasNode) =>  {\n  var canvas = canvasNode,\n    context = canvas.getContext('2d'),\n\n    requestAnimationFrame =\n      window.requestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      window.msRequestAnimationFrame\n\n  const resizeCanvasToWindow = (canvas) => {\n    if (!canvas || !canvas.parentElement) return\n\n    const canvasParent = canvas.parentElement\n\n    const canvasWidth = canvasParent.offsetWidth\n    const canvasHeight = canvasParent.offsetHeight\n\n    canvas.setAttribute('width', canvasWidth)\n    canvas.setAttribute('height', canvasHeight)\n  }\n\n  window.addEventListener('resize', () => resizeCanvasToWindow(canvas), false)\n  \n  var persons = [],\n    numberOfFirefly = 30,\n    birthToGive = 25\n\n  var colors = []\n  /* Galactic Tea - http://www.colourlovers.com/palette/1586746/Galactic_Tea*/\n  colors[2] = []\n  colors[2]['background'] = '#2F294F'\n  colors[2][1] = 'rgba(74,49,89,'\n  colors[2][2] = 'rgba(130,91,109,'\n  colors[2][3] = 'rgba(185,136,131,'\n  colors[2][4] = 'rgba(249,241,204,'\n\n  var colorTheme = 2, //getRandomInt(0,colors.length-1);\n    mainSpeed = 1\n\n  function getRandomInt(min, max, exept) {\n    var i = Math.floor(Math.random() * (max - min + 1)) + min\n    if (typeof exept == 'undefined') return i\n    else if (typeof exept == 'number' && i == exept)\n      return getRandomInt(min, max, exept)\n    else if (typeof exept == 'object' && (i >= exept[0] && i <= exept[1]))\n      return getRandomInt(min, max, exept)\n    else return i\n  }\n\n  function isEven(n) {\n    return n == parseFloat(n) ? !(n % 2) : void 0\n  }\n\n  function degToRad(deg) {\n    return deg * (Math.PI / 180)\n  }\n\n  function Firefly(id) {\n    this.id = id\n    this.width = getRandomInt(3, 6)\n    this.height = this.width\n    this.x = getRandomInt(0, canvas.width - this.width)\n    this.y = getRandomInt(0, canvas.height - this.height)\n    this.speed = this.width <= 10 ? 2 : 1\n    this.alpha = 1\n    this.alphaReduction = getRandomInt(1, 3) / 1000\n    this.color =\n      colors[colorTheme][getRandomInt(1, colors[colorTheme].length - 1)]\n    this.direction = getRandomInt(0, 360)\n    this.turner = getRandomInt(0, 1) == 0 ? -1 : 1\n    this.turnerAmp = getRandomInt(1, 2)\n    this.isHit = false\n    this.stepCounter = 0\n    this.changeDirectionFrequency = getRandomInt(1, 200)\n    this.shape = 2 //getRandomInt(2,3);\n    this.shadowBlur = getRandomInt(5, 25)\n  }\n\n  Firefly.prototype.stop = function() {\n    this.update()\n  }\n\n  Firefly.prototype.walk = function() {\n    var next_x = this.x + Math.cos(degToRad(this.direction)) * this.speed,\n      next_y = this.y + Math.sin(degToRad(this.direction)) * this.speed\n\n    // Canvas limits\n    if (\n      next_x >= canvas.width - this.width &&\n      (this.direction < 90 || this.direction > 270)\n    ) {\n      next_x = canvas.width - this.width\n      this.direction = getRandomInt(90, 270, this.direction)\n    }\n    if (next_x <= 0 && (this.direction > 90 && this.direction < 270)) {\n      next_x = 0\n      var exept = [90, 270]\n      this.direction = getRandomInt(0, 360, exept)\n    }\n    if (\n      next_y >= canvas.height - this.height &&\n      (this.direction > 0 && this.direction < 180)\n    ) {\n      next_y = canvas.height - this.height\n      this.direction = getRandomInt(180, 360, this.direction)\n    }\n    if (next_y <= 0 && (this.direction > 180 && this.direction < 360)) {\n      next_y = 0\n      this.direction = getRandomInt(0, 180, this.direction)\n    }\n\n    this.x = next_x\n    this.y = next_y\n\n    this.stepCounter++\n\n    if (\n      this.changeDirectionFrequency &&\n      this.stepCounter == this.changeDirectionFrequency\n    ) {\n      this.turner = this.turner == -1 ? 1 : -1\n      this.turnerAmp = getRandomInt(1, 2)\n      this.stepCounter = 0\n      this.changeDirectionFrequency = getRandomInt(1, 200)\n    }\n\n    this.direction += this.turner * this.turnerAmp\n\n    this.update()\n  }\n\n  Firefly.prototype.takeOppositeDirection = function() {\n    // Right -> Left\n    if (\n      (this.direction >= 0 && this.direction < 90) ||\n      (this.direction > 270 && this.direction <= 360)\n    ) {\n      this.direction = getRandomInt(90, 270)\n      return\n    }\n    // Left -> Right\n    if (this.direction > 90 && this.direction < 270) {\n      var exept = [90, 270]\n      this.direction = getRandomInt(0, 360, exept)\n      return\n    }\n    // Down -> Up\n    if (this.direction > 0 && this.direction < 180) {\n      this.direction = getRandomInt(180, 360)\n      return\n    }\n    // Up -> Down\n    if (this.direction > 180) {\n      this.direction = getRandomInt(0, 180)\n    }\n  }\n\n  Firefly.prototype.update = function() {\n    context.beginPath()\n\n    context.fillStyle = this.color + this.alpha + ')'\n    context.arc(\n      this.x + this.width / 2,\n      this.y + this.height / 2,\n      this.width / 2,\n      0,\n      2 * Math.PI,\n      false\n    )\n    context.shadowColor = this.color + this.alpha + ')'\n    context.shadowBlur = this.shadowBlur\n    context.shadowOffsetX = 0\n    context.shadowOffsetY = 0\n    context.fill()\n\n    if (this.id > 15) {\n      this.alpha -= this.alphaReduction\n      if (this.alpha <= 0) this.die()\n    }\n  }\n\n  Firefly.prototype.die = function() {\n    persons[this.id] = null\n    delete persons[this.id]\n  }\n\n  function start() {\n    resizeCanvasToWindow(canvas)\n    instantiatePopulation()\n    animate()\n  }\n\n  function instantiatePopulation() {\n    var i = 0\n    while (i < numberOfFirefly) {\n      persons[i] = new Firefly(i)\n      i++\n    }\n  }\n\n  function animate() {\n    context.clearRect(0, 0, canvas.width, canvas.height)\n\n    context.beginPath()\n\n    // Création d'une copie de l'array persons\n    var persons_order = persons.slice(0)\n    // Tri par ordre de position sur l'axe y (afin de gérer les z-index)\n    persons_order.sort(function(a, b) {\n      return a.y - b.y\n    })\n\n    // Paint les instances dans l'ordre trié\n    for (var i in persons_order) {\n      var u = persons_order[i].id\n      persons[u].walk()\n    }\n\n    requestAnimationFrame(animate)\n  }\n\n  canvas.onclick = function(e) {\n    giveBirth(e, birthToGive)\n  }\n\n  function giveBirth(e, u) {\n    var i = persons.length\n    persons[i] = new Firefly(i)\n    persons[i].x = e.layerX\n    persons[i].y = e.layerY\n\n    if (u > 1) giveBirth(e, u - 1)\n  }\n\n\n\n  start()\n}","import React, { useEffect, useRef } from 'react'\nimport { styled } from 'linaria/react'\n\nimport { setupAnimation } from 'src/fireflies'\n\nconst Canvas = styled.canvas`\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n  max-width: 100%;\n`\n\nexport const Background = () => {\n  const canvasRef = useRef(null)\n\n  useEffect(() => {\n    if (canvasRef.current) setupAnimation(canvasRef.current)\n  }, [])\n\n  return <Canvas height=\"100%\" width=\"100%\" ref={canvasRef} />\n}\n"],"sourceRoot":""}